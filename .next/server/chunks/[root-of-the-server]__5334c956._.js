module.exports = [
"[project]/.next-internal/server/app/api/contact/route/actions.js [app-rsc] (server actions loader, ecmascript)", ((__turbopack_context__, module, exports) => {

}),
"[externals]/next/dist/compiled/next-server/app-route-turbo.runtime.dev.js [external] (next/dist/compiled/next-server/app-route-turbo.runtime.dev.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/compiled/next-server/app-route-turbo.runtime.dev.js", () => require("next/dist/compiled/next-server/app-route-turbo.runtime.dev.js"));

module.exports = mod;
}),
"[externals]/next/dist/compiled/@opentelemetry/api [external] (next/dist/compiled/@opentelemetry/api, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/compiled/@opentelemetry/api", () => require("next/dist/compiled/@opentelemetry/api"));

module.exports = mod;
}),
"[externals]/next/dist/compiled/next-server/app-page-turbo.runtime.dev.js [external] (next/dist/compiled/next-server/app-page-turbo.runtime.dev.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/compiled/next-server/app-page-turbo.runtime.dev.js", () => require("next/dist/compiled/next-server/app-page-turbo.runtime.dev.js"));

module.exports = mod;
}),
"[externals]/next/dist/server/app-render/work-unit-async-storage.external.js [external] (next/dist/server/app-render/work-unit-async-storage.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/server/app-render/work-unit-async-storage.external.js", () => require("next/dist/server/app-render/work-unit-async-storage.external.js"));

module.exports = mod;
}),
"[externals]/next/dist/server/app-render/work-async-storage.external.js [external] (next/dist/server/app-render/work-async-storage.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/server/app-render/work-async-storage.external.js", () => require("next/dist/server/app-render/work-async-storage.external.js"));

module.exports = mod;
}),
"[externals]/next/dist/shared/lib/no-fallback-error.external.js [external] (next/dist/shared/lib/no-fallback-error.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/shared/lib/no-fallback-error.external.js", () => require("next/dist/shared/lib/no-fallback-error.external.js"));

module.exports = mod;
}),
"[externals]/next/dist/server/app-render/after-task-async-storage.external.js [external] (next/dist/server/app-render/after-task-async-storage.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/server/app-render/after-task-async-storage.external.js", () => require("next/dist/server/app-render/after-task-async-storage.external.js"));

module.exports = mod;
}),
"[externals]/next/dist/server/app-render/action-async-storage.external.js [external] (next/dist/server/app-render/action-async-storage.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/server/app-render/action-async-storage.external.js", () => require("next/dist/server/app-render/action-async-storage.external.js"));

module.exports = mod;
}),
"[externals]/events [external] (events, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("events", () => require("events"));

module.exports = mod;
}),
"[externals]/url [external] (url, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("url", () => require("url"));

module.exports = mod;
}),
"[externals]/util [external] (util, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("util", () => require("util"));

module.exports = mod;
}),
"[externals]/fs [external] (fs, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("fs", () => require("fs"));

module.exports = mod;
}),
"[externals]/http [external] (http, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("http", () => require("http"));

module.exports = mod;
}),
"[externals]/https [external] (https, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("https", () => require("https"));

module.exports = mod;
}),
"[externals]/zlib [external] (zlib, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("zlib", () => require("zlib"));

module.exports = mod;
}),
"[externals]/stream [external] (stream, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("stream", () => require("stream"));

module.exports = mod;
}),
"[externals]/net [external] (net, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("net", () => require("net"));

module.exports = mod;
}),
"[externals]/dns [external] (dns, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("dns", () => require("dns"));

module.exports = mod;
}),
"[externals]/os [external] (os, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("os", () => require("os"));

module.exports = mod;
}),
"[externals]/path [external] (path, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("path", () => require("path"));

module.exports = mod;
}),
"[externals]/crypto [external] (crypto, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("crypto", () => require("crypto"));

module.exports = mod;
}),
"[externals]/tls [external] (tls, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("tls", () => require("tls"));

module.exports = mod;
}),
"[externals]/child_process [external] (child_process, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("child_process", () => require("child_process"));

module.exports = mod;
}),
"[project]/app/api/contact/route.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "POST",
    ()=>POST
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/server.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$nodemailer$2f$lib$2f$nodemailer$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/nodemailer/lib/nodemailer.js [app-route] (ecmascript)");
;
;
const NOTIFY_EMAIL = "ryanmoshi77@gmail.com";
// IMPORTANT: Emails can't load images from localhost. Default to your live site,
// and allow overriding via env SITE_URL when deploying elsewhere.
const SITE_URL = process.env.SITE_URL || "https://ryan-moshi-portfolio.lindy.site";
const SMTP_HOST = process.env.SMTP_HOST || "smtp.gmail.com";
const SMTP_PORT = Number(process.env.SMTP_PORT || 587);
const SMTP_USER = process.env.SMTP_USER || "";
const SMTP_PASS = process.env.SMTP_PASS || "";
const FROM_EMAIL = process.env.MAIL_FROM || "Ryan Moshi <noreply@your-domain.com>";
async function sendEmail(to, subject, html) {
    if (!SMTP_USER || !SMTP_PASS) {
        console.error("SMTP Configuration Check:");
        console.error("SMTP_USER:", SMTP_USER ? "Set" : "Missing");
        console.error("SMTP_PASS:", SMTP_PASS ? "Set" : "Missing");
        console.error("SMTP_HOST:", SMTP_HOST);
        console.error("SMTP_PORT:", SMTP_PORT);
        throw new Error("SMTP not configured. Set SMTP_USER and SMTP_PASS in .env.local");
    }
    const transporter = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$nodemailer$2f$lib$2f$nodemailer$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"].createTransport({
        host: SMTP_HOST,
        port: SMTP_PORT,
        secure: SMTP_PORT === 465,
        auth: {
            user: SMTP_USER,
            pass: SMTP_PASS
        },
        tls: {
            rejectUnauthorized: false // Allow self-signed certificates
        }
    });
    await transporter.sendMail({
        from: FROM_EMAIL,
        to,
        subject,
        html
    });
}
function renderUserTemplate(name) {
    const logo = `${SITE_URL}/images/ryan-profile-red.jpg`;
    return `
  <table role="presentation" width="100%" cellpadding="0" cellspacing="0" style="background:#0b0f16;color:#fff;padding:24px;font-family:Inter,system-ui,Arial,sans-serif">
    <tr>
      <td align="center">
        <table role="presentation" width="600" cellpadding="0" cellspacing="0" style="max-width:600px;background:#111827;border-radius:16px;overflow:hidden">
          <tr>
            <td style="background:#ef4444;padding:20px 24px;text-align:center">
              <img src="${logo}" alt="Ryan Moshi" width="56" height="56" style="border-radius:12px;display:block;margin:0 auto 8px" />
              <div style="font-size:18px;font-weight:700;letter-spacing:.3px;margin:0;color:#fff">Ryan Moshi</div>
            </td>
          </tr>
          <tr>
            <td style="padding:24px 24px 8px">
              <h1 style="margin:0 0 10px;font-size:22px;font-weight:700;letter-spacing:.3px;color:#fff">Thank you, ${name}!</h1>
              <p style="margin:0 0 16px;opacity:.9;line-height:1.6;color:#e5e7eb">Your message has been received. Iâ€™ll get back to you shortly. In the meantime, feel free to explore recent work and capabilities.</p>
            </td>
          </tr>
          <tr>
            <td style="padding:8px 24px 24px;text-align:center">
              <a href="${SITE_URL}" style="display:inline-block;background:#ef4444;color:#fff;text-decoration:none;padding:12px 18px;border-radius:10px;font-weight:600">Visit Portfolio</a>
            </td>
          </tr>
        </table>
      </td>
    </tr>
  </table>`;
}
function renderOwnerTemplate(payload) {
    const entries = Object.entries(payload);
    const rows = entries.map(([k, v])=>`<tr><td style="padding:6px 12px;background:#0b0f16;color:#9ca3af">${k}</td><td style="padding:6px 12px;background:#111827;color:#fff">${(v || "").toString().replace(/</g, "&lt;")}</td></tr>`).join("");
    const logo = `${SITE_URL}/images/ryan-profile-red.jpg`;
    const retrosoft = `${SITE_URL}/images/retrosoft-logo.png`;
    const retroworld = `${SITE_URL}/images/retroworld-logo.png`;
    const dropex = `${SITE_URL}/images/dropex-logo-blue.png`;
    return `
  <table role="presentation" width="100%" cellpadding="0" cellspacing="0" style="background:#0b0f16;color:#fff;padding:24px;font-family:Inter,system-ui,Arial,sans-serif">
    <tr><td align="center">
      <table role="presentation" width="700" cellpadding="0" cellspacing="0" style="max-width:700px;background:#111827;border-radius:16px;overflow:hidden">
        <tr>
          <td style="background:#ef4444;padding:16px 20px;text-align:center">
            <img src="${logo}" width="44" height="44" alt="Ryan Moshi" style="border-radius:10px;display:block;margin:0 auto 8px" />
            <div style="font-weight:700;color:#fff;margin:0">New Contact Form Submission</div>
          </td>
        </tr>
        <tr><td style="padding:16px 20px">
          <table role="presentation" width="100%" cellpadding="0" cellspacing="0" style="border-collapse:collapse">
            ${rows}
          </table>
        </td></tr>
        <tr>
          <td style="padding:12px 20px 20px;text-align:center;opacity:.9">
            <table role="presentation" cellpadding="0" cellspacing="0" style="margin:0 auto">
              <tr>
                <td style="padding:0 6px"><img src="${retrosoft}" width="28" height="28" alt="Retrosoft" style="border-radius:6px;display:block" /></td>
                <td style="padding:0 6px"><img src="${retroworld}" width="28" height="28" alt="RetroWorld Studios" style="border-radius:6px;display:block" /></td>
                <td style="padding:0 6px"><img src="${dropex}" width="28" height="28" alt="DropEx Logistics" style="border-radius:6px;display:block" /></td>
              </tr>
            </table>
          </td>
        </tr>
      </table>
    </td></tr>
  </table>`;
}
async function POST(req) {
    try {
        // Debug environment variables
        console.log("Environment Variables Debug:");
        console.log("SMTP_USER:", process.env.SMTP_USER ? "Set" : "Missing");
        console.log("SMTP_PASS:", process.env.SMTP_PASS ? "Set" : "Missing");
        console.log("SMTP_HOST:", process.env.SMTP_HOST);
        console.log("SMTP_PORT:", process.env.SMTP_PORT);
        console.log("MAIL_FROM:", process.env.MAIL_FROM);
        const data = await req.json();
        const { name, email, projectName, projectType, budget, timeline, description, source } = data;
        // Enhanced validation
        if (!name || !email || !projectName || !projectType || !description) {
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                error: "Missing required fields. Please fill in all required fields."
            }, {
                status: 400
            });
        }
        // Email validation
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(email)) {
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                error: "Please provide a valid email address."
            }, {
                status: 400
            });
        }
        // Prepare enhanced data for email templates
        const enhancedData = {
            name: name.trim(),
            email: email.trim(),
            projectName: projectName.trim(),
            projectType: projectType,
            budget: budget ? `$${Number(budget).toLocaleString()}` : 'Not specified',
            timeline: timeline ? `${timeline} months` : 'Not specified',
            description: description.trim(),
            source: source || 'Not specified',
            submittedAt: new Date().toLocaleString()
        };
        await Promise.all([
            sendEmail(email, "Thanks for reaching out to Ryan Moshi", renderUserTemplate(name)),
            sendEmail(NOTIFY_EMAIL, "New Project Inquiry - Portfolio Contact", renderOwnerTemplate(enhancedData))
        ]);
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
            ok: true
        });
    } catch (err) {
        console.error('Contact form error:', err);
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
            error: err?.message || "Failed to send message. Please try again later."
        }, {
            status: 500
        });
    }
}
}),
];

//# sourceMappingURL=%5Broot-of-the-server%5D__5334c956._.js.map