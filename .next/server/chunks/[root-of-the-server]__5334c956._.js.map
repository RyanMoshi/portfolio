{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 145, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ryanm/myportfolio/app/api/contact/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\r\nimport nodemailer from \"nodemailer\";\r\n\r\nconst NOTIFY_EMAIL = \"ryanmoshi77@gmail.com\";\r\n// IMPORTANT: Emails can't load images from localhost. Default to your live site,\r\n// and allow overriding via env SITE_URL when deploying elsewhere.\r\nconst SITE_URL = process.env.SITE_URL || \"https://ryan-moshi-portfolio.lindy.site\";\r\nconst SMTP_HOST = process.env.SMTP_HOST || \"smtp.gmail.com\";\r\nconst SMTP_PORT = Number(process.env.SMTP_PORT || 587);\r\nconst SMTP_USER = process.env.SMTP_USER || \"\";\r\nconst SMTP_PASS = process.env.SMTP_PASS || \"\";\r\nconst FROM_EMAIL = process.env.MAIL_FROM || \"Ryan Moshi <noreply@your-domain.com>\";\r\n\r\nasync function sendEmail(to: string, subject: string, html: string) {\r\n  if (!SMTP_USER || !SMTP_PASS) {\r\n    throw new Error(\"SMTP not configured. Set SMTP_USER and SMTP_PASS in .env.local\");\r\n  }\r\n  const transporter = nodemailer.createTransport({\r\n    host: SMTP_HOST,\r\n    port: SMTP_PORT,\r\n    secure: SMTP_PORT === 465,\r\n    auth: { user: SMTP_USER, pass: SMTP_PASS },\r\n  });\r\n  await transporter.sendMail({ from: FROM_EMAIL, to, subject, html });\r\n}\r\n\r\nfunction renderUserTemplate(name: string) {\r\n  const logo = `${SITE_URL}/images/ryan-profile-red.jpg`;\r\n  return `\r\n  <table role=\"presentation\" width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" style=\"background:#0b0f16;color:#fff;padding:24px;font-family:Inter,system-ui,Arial,sans-serif\">\r\n    <tr>\r\n      <td align=\"center\">\r\n        <table role=\"presentation\" width=\"600\" cellpadding=\"0\" cellspacing=\"0\" style=\"max-width:600px;background:#111827;border-radius:16px;overflow:hidden\">\r\n          <tr>\r\n            <td style=\"background:#ef4444;padding:20px 24px;text-align:center\">\r\n              <img src=\"${logo}\" alt=\"Ryan Moshi\" width=\"56\" height=\"56\" style=\"border-radius:12px;display:block;margin:0 auto 8px\" />\r\n              <div style=\"font-size:18px;font-weight:700;letter-spacing:.3px;margin:0;color:#fff\">Ryan Moshi</div>\r\n            </td>\r\n          </tr>\r\n          <tr>\r\n            <td style=\"padding:24px 24px 8px\">\r\n              <h1 style=\"margin:0 0 10px;font-size:22px;font-weight:700;letter-spacing:.3px;color:#fff\">Thank you, ${name}!</h1>\r\n              <p style=\"margin:0 0 16px;opacity:.9;line-height:1.6;color:#e5e7eb\">Your message has been received. Iâ€™ll get back to you shortly. In the meantime, feel free to explore recent work and capabilities.</p>\r\n            </td>\r\n          </tr>\r\n          <tr>\r\n            <td style=\"padding:8px 24px 24px;text-align:center\">\r\n              <a href=\"${SITE_URL}\" style=\"display:inline-block;background:#ef4444;color:#fff;text-decoration:none;padding:12px 18px;border-radius:10px;font-weight:600\">Visit Portfolio</a>\r\n            </td>\r\n          </tr>\r\n        </table>\r\n      </td>\r\n    </tr>\r\n  </table>`;\r\n}\r\n\r\nfunction renderOwnerTemplate(payload: any) {\r\n  const entries = Object.entries(payload) as [string, string][];\r\n  const rows = entries\r\n    .map(([k, v]) => `<tr><td style=\"padding:6px 12px;background:#0b0f16;color:#9ca3af\">${k}</td><td style=\"padding:6px 12px;background:#111827;color:#fff\">${(v||\"\")\r\n      .toString()\r\n      .replace(/</g, \"&lt;\")}</td></tr>`) \r\n    .join(\"\");\r\n  const logo = `${SITE_URL}/images/ryan-profile-red.jpg`;\r\n  const retrosoft = `${SITE_URL}/images/retrosoft-logo.png`;\r\n  const retroworld = `${SITE_URL}/images/retroworld-logo.png`;\r\n  const dropex = `${SITE_URL}/images/dropex-logo-blue.png`;\r\n  return `\r\n  <table role=\"presentation\" width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" style=\"background:#0b0f16;color:#fff;padding:24px;font-family:Inter,system-ui,Arial,sans-serif\">\r\n    <tr><td align=\"center\">\r\n      <table role=\"presentation\" width=\"700\" cellpadding=\"0\" cellspacing=\"0\" style=\"max-width:700px;background:#111827;border-radius:16px;overflow:hidden\">\r\n        <tr>\r\n          <td style=\"background:#ef4444;padding:16px 20px;text-align:center\">\r\n            <img src=\"${logo}\" width=\"44\" height=\"44\" alt=\"Ryan Moshi\" style=\"border-radius:10px;display:block;margin:0 auto 8px\" />\r\n            <div style=\"font-weight:700;color:#fff;margin:0\">New Contact Form Submission</div>\r\n          </td>\r\n        </tr>\r\n        <tr><td style=\"padding:16px 20px\">\r\n          <table role=\"presentation\" width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" style=\"border-collapse:collapse\">\r\n            ${rows}\r\n          </table>\r\n        </td></tr>\r\n        <tr>\r\n          <td style=\"padding:12px 20px 20px;text-align:center;opacity:.9\">\r\n            <table role=\"presentation\" cellpadding=\"0\" cellspacing=\"0\" style=\"margin:0 auto\">\r\n              <tr>\r\n                <td style=\"padding:0 6px\"><img src=\"${retrosoft}\" width=\"28\" height=\"28\" alt=\"Retrosoft\" style=\"border-radius:6px;display:block\" /></td>\r\n                <td style=\"padding:0 6px\"><img src=\"${retroworld}\" width=\"28\" height=\"28\" alt=\"RetroWorld Studios\" style=\"border-radius:6px;display:block\" /></td>\r\n                <td style=\"padding:0 6px\"><img src=\"${dropex}\" width=\"28\" height=\"28\" alt=\"DropEx Logistics\" style=\"border-radius:6px;display:block\" /></td>\r\n              </tr>\r\n            </table>\r\n          </td>\r\n        </tr>\r\n      </table>\r\n    </td></tr>\r\n  </table>`;\r\n}\r\n\r\nexport async function POST(req: Request) {\r\n  try {\r\n    const data = await req.json();\r\n    const { name, email } = data;\r\n\r\n    if (!name || !email) {\r\n      return NextResponse.json({ error: \"Missing required fields\" }, { status: 400 });\r\n    }\r\n\r\n    await Promise.all([\r\n      sendEmail(email, \"Thanks for reaching out to Ryan Moshi\", renderUserTemplate(name)),\r\n      sendEmail(NOTIFY_EMAIL, \"New Portfolio Contact Submission\", renderOwnerTemplate(data)),\r\n    ]);\r\n\r\n    return NextResponse.json({ ok: true });\r\n  } catch (err: any) {\r\n    return NextResponse.json({ error: err?.message || \"Unknown error\" }, { status: 500 });\r\n  }\r\n}\r\n\r\n\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEA,MAAM,eAAe;AACrB,iFAAiF;AACjF,kEAAkE;AAClE,MAAM,WAAW,QAAQ,GAAG,CAAC,QAAQ,IAAI;AACzC,MAAM,YAAY,QAAQ,GAAG,CAAC,SAAS,IAAI;AAC3C,MAAM,YAAY,OAAO,QAAQ,GAAG,CAAC,SAAS,IAAI;AAClD,MAAM,YAAY,QAAQ,GAAG,CAAC,SAAS,IAAI;AAC3C,MAAM,YAAY,QAAQ,GAAG,CAAC,SAAS,IAAI;AAC3C,MAAM,aAAa,QAAQ,GAAG,CAAC,SAAS,IAAI;AAE5C,eAAe,UAAU,EAAU,EAAE,OAAe,EAAE,IAAY;IAChE,IAAI,CAAC,aAAa,CAAC,WAAW;QAC5B,MAAM,IAAI,MAAM;IAClB;IACA,MAAM,cAAc,4JAAU,CAAC,eAAe,CAAC;QAC7C,MAAM;QACN,MAAM;QACN,QAAQ,cAAc;QACtB,MAAM;YAAE,MAAM;YAAW,MAAM;QAAU;IAC3C;IACA,MAAM,YAAY,QAAQ,CAAC;QAAE,MAAM;QAAY;QAAI;QAAS;IAAK;AACnE;AAEA,SAAS,mBAAmB,IAAY;IACtC,MAAM,OAAO,GAAG,SAAS,4BAA4B,CAAC;IACtD,OAAO,CAAC;;;;;;;wBAOc,EAAE,KAAK;;;;;;mHAMoF,EAAE,KAAK;;;;;;uBAMnG,EAAE,SAAS;;;;;;UAMxB,CAAC;AACX;AAEA,SAAS,oBAAoB,OAAY;IACvC,MAAM,UAAU,OAAO,OAAO,CAAC;IAC/B,MAAM,OAAO,QACV,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,GAAK,CAAC,kEAAkE,EAAE,EAAE,gEAAgE,EAAE,CAAC,KAAG,EAAE,EAC7J,QAAQ,GACR,OAAO,CAAC,MAAM,QAAQ,UAAU,CAAC,EACnC,IAAI,CAAC;IACR,MAAM,OAAO,GAAG,SAAS,4BAA4B,CAAC;IACtD,MAAM,YAAY,GAAG,SAAS,0BAA0B,CAAC;IACzD,MAAM,aAAa,GAAG,SAAS,2BAA2B,CAAC;IAC3D,MAAM,SAAS,GAAG,SAAS,4BAA4B,CAAC;IACxD,OAAO,CAAC;;;;;;sBAMY,EAAE,KAAK;;;;;;YAMjB,EAAE,KAAK;;;;;;;oDAOiC,EAAE,UAAU;oDACZ,EAAE,WAAW;oDACb,EAAE,OAAO;;;;;;;UAOnD,CAAC;AACX;AAEO,eAAe,KAAK,GAAY;IACrC,IAAI;QACF,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG;QAExB,IAAI,CAAC,QAAQ,CAAC,OAAO;YACnB,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAA0B,GAAG;gBAAE,QAAQ;YAAI;QAC/E;QAEA,MAAM,QAAQ,GAAG,CAAC;YAChB,UAAU,OAAO,yCAAyC,mBAAmB;YAC7E,UAAU,cAAc,oCAAoC,oBAAoB;SACjF;QAED,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,IAAI;QAAK;IACtC,EAAE,OAAO,KAAU;QACjB,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO,KAAK,WAAW;QAAgB,GAAG;YAAE,QAAQ;QAAI;IACrF;AACF","debugId":null}}]
}