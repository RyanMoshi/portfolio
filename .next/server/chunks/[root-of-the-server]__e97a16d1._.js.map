{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 55, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ryanm/myportfolio/app/api/contact/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\r\n\r\nconst RESEND_API_KEY = process.env.RESEND_API_KEY || \"\";\r\nconst NOTIFY_EMAIL = \"ryanmoshi77@gmail.com\";\r\nconst FROM_EMAIL = process.env.MAIL_FROM || \"Ryan Moshi <onboarding@resend.dev>\";\r\n\r\nasync function sendEmail(to: string, subject: string, html: string) {\r\n  const res = await fetch(\"https://api.resend.com/emails\", {\r\n    method: \"POST\",\r\n    headers: {\r\n      Authorization: `Bearer ${RESEND_API_KEY}`,\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify({ from: FROM_EMAIL, to, subject, html }),\r\n  });\r\n  if (!res.ok) {\r\n    const body = await res.text();\r\n    throw new Error(`Email send failed: ${res.status} ${body}`);\r\n  }\r\n}\r\n\r\nfunction renderUserTemplate(name: string) {\r\n  return `\r\n  <table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" style=\"background:#0b0f16;color:#fff;padding:24px;font-family:Inter,system-ui,Arial,sans-serif\">\r\n    <tr>\r\n      <td align=\"center\">\r\n        <table width=\"600\" style=\"max-width:600px;background:#111827;border-radius:12px;padding:24px\">\r\n          <tr>\r\n            <td style=\"text-align:center\">\r\n              <img src=\"https://ryan-moshi-portfolio.lindy.site/logo.png\" alt=\"Ryan Moshi\" width=\"56\" height=\"56\" style=\"display:block;margin:0 auto 12px;border-radius:12px\"/>\r\n              <h1 style=\"margin:0 0 8px;font-size:22px;font-weight:700;letter-spacing:.3px\">Thank you, ${name}!</h1>\r\n              <p style=\"margin:0 0 16px;opacity:.85\">Your message has been received. Iâ€™ll get back to you shortly.</p>\r\n              <a href=\"https://ryan-moshi-portfolio.lindy.site\" style=\"display:inline-block;background:#ef4444;color:#fff;text-decoration:none;padding:10px 16px;border-radius:8px;font-weight:600\">Visit Portfolio</a>\r\n            </td>\r\n          </tr>\r\n        </table>\r\n      </td>\r\n    </tr>\r\n  </table>`;\r\n}\r\n\r\nfunction renderOwnerTemplate(payload: any) {\r\n  const entries = Object.entries(payload) as [string, string][];\r\n  const rows = entries\r\n    .map(([k, v]) => `<tr><td style=\"padding:6px 12px;background:#0b0f16;color:#9ca3af\">${k}</td><td style=\"padding:6px 12px;background:#111827;color:#fff\">${(v||\"\")\r\n      .toString()\r\n      .replace(/</g, \"&lt;\")}</td></tr>`) \r\n    .join(\"\");\r\n  return `\r\n  <table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" style=\"background:#0b0f16;color:#fff;padding:24px;font-family:Inter,system-ui,Arial,sans-serif\">\r\n    <tr><td align=\"center\">\r\n      <table width=\"700\" style=\"max-width:700px;background:#111827;border-radius:12px;padding:0 0 8px\">\r\n        <tr><td style=\"padding:20px 24px\"><h2 style=\"margin:0;font-size:18px\">New Contact Form Submission</h2></td></tr>\r\n        <tr><td>\r\n          <table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" style=\"border-collapse:collapse\">${rows}</table>\r\n        </td></tr>\r\n      </table>\r\n    </td></tr>\r\n  </table>`;\r\n}\r\n\r\nexport async function POST(req: Request) {\r\n  try {\r\n    const data = await req.json();\r\n    const { name, email } = data;\r\n\r\n    if (!name || !email) {\r\n      return NextResponse.json({ error: \"Missing required fields\" }, { status: 400 });\r\n    }\r\n\r\n    if (!RESEND_API_KEY) {\r\n      // In local/dev, allow submissions without sending email so the UI works.\r\n      return NextResponse.json({ ok: true, note: \"Email disabled (missing RESEND_API_KEY).\" });\r\n    }\r\n\r\n    await Promise.all([\r\n      sendEmail(email, \"Thanks for reaching out to Ryan\", renderUserTemplate(name)),\r\n      sendEmail(NOTIFY_EMAIL, \"New Portfolio Contact Submission\", renderOwnerTemplate(data)),\r\n    ]);\r\n\r\n    return NextResponse.json({ ok: true });\r\n  } catch (err: any) {\r\n    return NextResponse.json({ error: err?.message || \"Unknown error\" }, { status: 500 });\r\n  }\r\n}\r\n\r\n\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,iBAAiB,QAAQ,GAAG,CAAC,cAAc,IAAI;AACrD,MAAM,eAAe;AACrB,MAAM,aAAa,QAAQ,GAAG,CAAC,SAAS,IAAI;AAE5C,eAAe,UAAU,EAAU,EAAE,OAAe,EAAE,IAAY;IAChE,MAAM,MAAM,MAAM,MAAM,iCAAiC;QACvD,QAAQ;QACR,SAAS;YACP,eAAe,CAAC,OAAO,EAAE,gBAAgB;YACzC,gBAAgB;QAClB;QACA,MAAM,KAAK,SAAS,CAAC;YAAE,MAAM;YAAY;YAAI;YAAS;QAAK;IAC7D;IACA,IAAI,CAAC,IAAI,EAAE,EAAE;QACX,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,MAAM,IAAI,MAAM,CAAC,mBAAmB,EAAE,IAAI,MAAM,CAAC,CAAC,EAAE,MAAM;IAC5D;AACF;AAEA,SAAS,mBAAmB,IAAY;IACtC,OAAO,CAAC;;;;;;;;uGAQ6F,EAAE,KAAK;;;;;;;;UAQpG,CAAC;AACX;AAEA,SAAS,oBAAoB,OAAY;IACvC,MAAM,UAAU,OAAO,OAAO,CAAC;IAC/B,MAAM,OAAO,QACV,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,GAAK,CAAC,kEAAkE,EAAE,EAAE,gEAAgE,EAAE,CAAC,KAAG,EAAE,EAC7J,QAAQ,GACR,OAAO,CAAC,MAAM,QAAQ,UAAU,CAAC,EACnC,IAAI,CAAC;IACR,OAAO,CAAC;;;;;;+FAMqF,EAAE,KAAK;;;;UAI5F,CAAC;AACX;AAEO,eAAe,KAAK,GAAY;IACrC,IAAI;QACF,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG;QAExB,IAAI,CAAC,QAAQ,CAAC,OAAO;YACnB,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAA0B,GAAG;gBAAE,QAAQ;YAAI;QAC/E;QAEA,IAAI,CAAC,gBAAgB;YACnB,yEAAyE;YACzE,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,IAAI;gBAAM,MAAM;YAA2C;QACxF;QAEA,MAAM,QAAQ,GAAG,CAAC;YAChB,UAAU,OAAO,mCAAmC,mBAAmB;YACvE,UAAU,cAAc,oCAAoC,oBAAoB;SACjF;QAED,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,IAAI;QAAK;IACtC,EAAE,OAAO,KAAU;QACjB,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO,KAAK,WAAW;QAAgB,GAAG;YAAE,QAAQ;QAAI;IACrF;AACF","debugId":null}}]
}